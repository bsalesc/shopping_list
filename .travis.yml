dist: trusty
sudo: false

language: node_js
node_js:
  - '8'

addons:
  apt:
    sources:
      - google-chrome
    packages:
      - google-chrome-stable

cache:
  yarn: true
  directories:
    - node_modules

install:
  - yarn

script:
  - yarn test:headless

before_deploy:
  - yarn build --prod --aot --base-href https://bsalesc-shopping-list.herokuapp.com/

deploy:
  provider: s3
  access_key_id: 'AKIAJTCCYDJQI44NGFWQ'
  secret_access_key:
    secure: '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'
  bucket: 'bsalesshoppinglist'
  acl: public_read
  skip_cleanup: true
  local_dir: dist/shoppingList
  region: 'us-east-2'
